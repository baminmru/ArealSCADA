<html>
<head>
	<meta charset="UTF-8">
	<title>Каменогорск. Уровень 2. Насосная станция второго подъема</title>
	<link rel="stylesheet" href="/leaflet.css" />
<link rel="stylesheet" href="/css/areal.css" />
	<script src="/leaflet.js" type="text/javascript"></script>
	<script src="./dist/PruneCluster.js" type="text/javascript"></script>
	<script src="./layer/Marker.Text.js" type="text/javascript"></script>
	<script src="./jquery-2.1.1.min.js" type="text/jscript"></script>
	
	<script src="./draw/src/leaflet.circle.topolygon-src.js"></script>
	<script src="./draw/src/Leaflet.draw.js"></script>
    <script src="./draw/src/Leaflet.Draw.Event.js"></script>
    <link rel="stylesheet" href="./draw/src/leaflet.draw.css"/>

    <script src="./draw/src/Toolbar.js"></script>
    <script src="./draw/src/Tooltip.js"></script>

    <script src="./draw/src/ext/GeometryUtil.js"></script>
    <script src="./draw/src/ext/LatLngUtil.js"></script>
    <script src="./draw/src/ext/LineUtil.Intersect.js"></script>
    <script src="./draw/src/ext/Polygon.Intersect.js"></script>
    <script src="./draw/src/ext/Polyline.Intersect.js"></script>
    <script src="./draw/src/ext/TouchEvents.js"></script>

    <script src="./draw/src/draw/DrawToolbar.js"></script>
    <script src="./draw/src/draw/handler/Draw.Feature.js"></script>
    <script src="./draw/src/draw/handler/Draw.SimpleShape.js"></script>
    <script src="./draw/src/draw/handler/Draw.Polyline.js"></script>
    <script src="./draw/src/draw/handler/Draw.Circle.js"></script>
    <script src="./draw/src/draw/handler/Draw.Marker.js"></script>
    <script src="./draw/src/draw/handler/Draw.Polygon.js"></script>
    <script src="./draw/src/draw/handler/Draw.Rectangle.js"></script>


    <script src="./draw/src/edit/EditToolbar.js"></script>
    <script src="./draw/src/edit/handler/EditToolbar.Edit.js"></script>
    <script src="./draw/src/edit/handler/EditToolbar.Delete.js"></script>

    <script src="./draw/src/Control.Draw.js"></script>

    <script src="./draw/src/edit/handler/Edit.Poly.js"></script>
    <script src="./draw/src/edit/handler/Edit.SimpleShape.js"></script>
    <script src="./draw/src/edit/handler/Edit.Circle.js"></script>
    <script src="./draw/src/edit/handler/Edit.Rectangle.js"></script>
    <script src="./draw/src/edit/handler/Edit.Marker.js"></script>
	
	
	<script src="./dist/easy-button.js" type="text/javascript"></script>
	<link rel="stylesheet" href="./dist/easy-button.css"/>
	<script src="./dist/jQuery.print.js" type="text/javascript"></script>
	
	
</head>
<body oncontextmenu="return false">
	<div style="position:absolute; top:0px; left:0px; height:30px; width:1000px; background: #bfbfbf; padding:10px; overflow-y: scroll;" id="brief"><table border="0"><tr>	<td width="90px" ><span id="vP1">?</span></td>	<td width="90px" ><span id="vP2">?</span></td>	<td width="90px" ><span id="vP3">?</span></td>	<td width="90px" ><span id="vP4">?</span></td>	<td width="90px" ><span id="vP5">?</span></td>	<td width="90px" ><span id="vP6">?</span></td>	<td width="90px" ><span id="vP7">?</span></td>	<td width="90px" ><span id="vP8">?</span></td>	<td width="90px" ><span id="vP9">?</span></td>	<td width="90px" ><span id="vP0">?</span></td>	</tr></table>	</div>	<div style="position:absolute; width:1000px; bottom:0px; top:50px;" id="map"></div>
	<div style="position:absolute; width:990px; bottom:0px; top:0px; left:0px; background: #aeaeae; padding:10px; display:none; z-index:1200; "  id="detail">
		<h1><a href="#" onclick=' $("#detail").hide(); return false;' ><img src="images/close.png" alt="Закрыть" border="0" width="30px" height="30px" /></a> Детальная информация</h1>
		<hr>
		<div id="detail_info">
		</div>
	</div>
	<div style="position:absolute; top:0px; left:1008px; right:0px; bottom:0px; background: #bfbfbf; padding:10px; overflow-y: scroll;" id="brief">
<h1>
	<a href="level1.html"><img src="images\home.png" alt="Главный экран" width="50px"; height="50px"; /></a>
	<img src="/images/areal.logo.png" border="0"; width="250px"; height="50px";  align="right" />
	</h1>
	<h2>Насосная станция второго подъема</h2>
	<!--
	<h3> Насосы</h3>
	<ul>
	<li><a href="#" onclick='GetDitail("4.1");'>Насос 2M1  : <span id="v4.1">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.2");'>Насос 2M2  : <span id="v4.2">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.3");'>Насос 3  : <span id="v4.3">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.4");'>Насос 4  : <span id="v4.4">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.5");'>Насос 1M1  : <span id="v4.5">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.6");'>Насос 1M2  : <span id="v4.6">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.7");'>Насос 1M3  : <span id="v4.7">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.8");'>Насос 1M4  : <span id="v4.8">?</span></a> </li>
	</ul>
	<h3> Датчики </h3>
	<ul>
	<li><a href="#" onclick='GetDitail("4.101");'>FE1a  : <span id="v4.101">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.102");'>FE2a  : <span id="v4.102">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.103");'>LS15a  : <span id="v4.103">?</span></a></li>
	</ul>
	-->
	
	<h3> Задвижки</h3>
	<ul>
<!--	<li><a href="#" onclick='GetDitail("4.55");'>Управление 1M1  : <span id="v4.55">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.57");'>Управление 1M2  : <span id="v4.57">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.58");'>Управление 1M3  : <span id="v4.58">?</span></a> </li>
	<li><a href="#" onclick='GetDitail("4.59");'>Управление 1M4  : <span id="v4.59">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.51");'>Управление 2M1  : <span id="v4.51">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.52");'>Управление 2M2  : <span id="v4.52">?</span></a></li>
	-->
	<li><a href="#" onclick='GetDitail("4.53");'>1.1M1  : <span id="v4.53">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.54");'>1.1M2  : <span id="v4.54">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.56");'>1.2M1  : <span id="v4.56">?</span></a></li>
	<li><a href="#" onclick='GetDitail("4.60");'>1.2M2 : <span id="v4.60">?</span></a> </li>
	
	</ul>
	<hr>
	<span id="v260"></span><br/>
	<span id="v261"></span><br/>
	<span id="v262"></span><br/>
	<span id="v263"></span><br/>
	<span id="v264"></span><br/>
	<span id="v265"></span><br/>
	<span id="v266"></span><br/>
	<span id="v267"></span><br/>
	<span id="v268"></span><br/>
	</div>
<script type='text/javascript'>

function GetDitail(sid){
 return; 

	$("#detail").show(); 
	var item=document.getElementById('detail_info');
	if( item!=null){
		item.innerHTML =sid;
	}else{
		console.log(v.ID);
	}
	return false;
}



	var imgW=1201;
	var imgH=714;

	var imageUrl = './images/l2_4a.png', imageBounds = [[-imgH/20, -imgW/20], [imgH/20, imgW/20]];
	
	var map = L.map('map', { minZoom: 3, maxZoom: 6,attributionControl:false});  //.setView([27, 44], 3);
    map.attributionControl = false;
    L.imageOverlay(imageUrl, imageBounds, { opacity: 1 }).addTo(map); // , attribution: 'Цех:<%=GetC()%>'
	map.setView([-1.5, -18], 4);
	//	map.fitBounds(imageBounds);
	map.setMaxBounds([[-imgH/15, -imgW/15], [imgH/15, imgW/15]])
	
		L.easyButton({
	  id: 'id-map-print',  // an id for the generated button
	  position: 'topleft',      // inherited from L.Control -- the corner it goes in
	  type: 'replace',          // set to animate when you're comfy with css
	  leafletClasses: true,     // use leaflet classes to style the button?
	  states:[{                 // specify different icons and responses for your button
		stateName: 'map-print',
		onClick: function(button, map){
			$('#map').print();
		},
		title: 'Печать',
		icon: '<img src="/images/print.png" width="18px;" height="18px">'
	  }]
	}).addTo( map );
	/*
	
	var  drawnItems = L.featureGroup().addTo(map);
	
	
    map.addControl(new L.Control.Draw({
        edit: {
            featureGroup: drawnItems,
            poly: {
                allowIntersection: false
            }
        },
        draw: {
            polygon: {
                allowIntersection: false,
                showArea: true
            }
        }
    }));
	
*/

	var rgb = '#00FF00'; // green
	var bounds;
    map.on(L.Draw.Event.CREATED, function (event) {
        var layer = event.layer;
        var s ="";
		if(typeof layer.toPolygon =='undefined'){
			s= JSON.stringify(layer.toGeoJSON()) ;
			drawnItems.addLayer(layer);
		}else{
			
			//alert ( JSON.stringify(layer.toPolygon(24,map)) );
			bounds=layer.toPolygon(24,map);
			var player= L.polygon( bounds, {  color: rgb, opacity: 1.0, fillOpacity: 1, weight: 1 } );
			s= JSON.stringify(player.toGeoJSON());
			drawnItems.addLayer(player);
		}
		
		$.ajax({
		  type: 'GET',
		  url: 'savelayer.aspx',
		  data: 'P=l2_4&L=' +s,
		  success: function(data){
			//$('.results').html(data);
		  }
		});
		
    });
	
	
	map.on('contextmenu',function(event){ }); 
    var stanki =[];
	var blink=true;
	  
	    function MapX(X) {
            var mx = parseInt(X);
            mx = mx / 10 -imgW/20;
            return mx;
        }

        function MapY(Y) {
            var my = parseInt(Y);
            my =  imgH/20 - my / 10;
            return my;
        }
	
	var rect;
	var bounds;
	var rgb = '#00FF00'; // green
	var marker;
	
	function RCW(deviceID, QReg, Reg1, Bit1, Val1, Reg2, Bit2, Val2) {
	    $.ajax({
	        dataType: "json",
	        type: 'POST',
	        url: 'rcw.aspx',
	        data: 'id=' + deviceID + '&qreg=' + QReg + '&reg1=' + Reg1 + '&bit1=' + Bit1 + '&val1=' + Val1 + '&reg2=' + Reg2 + '&bit2=' + Bit2 + '&val2=' + Val2,
	        success: function (data) {
	            map.closePopup();
	        }
	    });
	}

	/*
	bounds=FlipLL([[-22.126665716861446,19.555188457772456,0],[-22.556833277602273,19.377007220020655,0],[-22.9262265363435,19.093561803411013,0],[-23.20967195295314,18.724168544669787,0],[-23.38785319070494,18.29400098392896,0],[-23.44862749270454,17.832374329567518,0],[-23.38785319070494,17.370747675206076,0],[-23.20967195295314,16.94058011446525,0],[-22.9262265363435,16.571186855724022,0],[-22.556833277602273,16.28774143911438,0],[-22.126665716861446,16.10956020136258,0],[-21.665039062500004,16.048785899362983,0],[-21.20341240813856,16.10956020136258,0],[-20.773244847397734,16.28774143911438,0],[-20.403851588656504,16.571186855724022,0],[-20.120406172046867,16.94058011446525,0],[-19.942224934295066,17.370747675206076,0],[-19.88145063229547,17.832374329567518,0],[-19.942224934295066,18.29400098392896,0],[-20.120406172046867,18.724168544669784,0],[-20.403851588656504,19.093561803411013,0],[-20.773244847397734,19.377007220020655,0],[-21.203412408138558,19.555188457772456,0],[-22.126665716861446,19.555188457772456,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.1';
	//rect.bindPopup('Насос 1');
	rect.bindTooltip('Насос 1');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	 
	
	bounds=FlipLL([[-7.859684709054044,19.55099835750306,0],[-8.283583609091547,19.37541368403249,0],[-8.647593846851008,19.096098804699018,0],[-8.926908726184479,18.73208856693956,0],[-9.10249339965505,18.308189666902056,0],[-9.162382061933092,17.853290114098012,0],[-9.10249339965505,17.39839056129397,0],[-8.926908726184479,16.97449166125647,0],[-8.647593846851008,16.610481423497006,0],[-8.283583609091547,16.331166544163533,0],[-7.859684709054044,16.155581870692963,0],[-7.40478515625,16.09569320841492,0],[-6.949885603445957,16.155581870692963,0],[-6.525986703408455,16.331166544163533,0],[-6.161976465648994,16.610481423497006,0],[-5.882661586315522,16.97449166125647,0],[-5.707076912844951,17.39839056129397,0],[-5.64718825056691,17.853290114098012,0],[-5.707076912844951,18.308189666902056,0],[-5.882661586315521,18.732088566939556,0],[-6.161976465648993,19.096098804699018,0],[-6.525986703408453,19.37541368403249,0],[-6.9498856034459555,19.55099835750306,0],[-7.859684709054044,19.55099835750306,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.2';
	//rect.bindPopup('Насос 2');
	rect.bindTooltip('Насос 2');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[5.843307155582796,19.28579702497655,0],[5.391528846063253,19.098664321987567,0],[5.003578016636174,18.800979180559345,0],[4.705892875207953,18.413028351132265,0],[4.518760172218969,17.961250041612722,0],[4.454932692126507,17.476432197195518,0],[4.518760172218968,16.991614352778313,0],[4.705892875207953,16.53983604325877,0],[5.003578016636173,16.15188521383169,0],[5.391528846063253,15.85420007240347,0],[5.843307155582797,15.667067369414486,0],[6.328125000000002,15.603239889322023,0],[6.812942844417207,15.667067369414486,0],[7.264721153936749,15.85420007240347,0],[7.652671983363829,16.15188521383169,0],[7.950357124792049,16.53983604325877,0],[8.137489827781033,16.991614352778313,0],[8.201317307873495,17.476432197195518,0],[8.137489827781033,17.961250041612722,0],[7.950357124792049,18.413028351132265,0],[7.652671983363829,18.800979180559345,0],[7.26472115393675,19.098664321987563,0],[6.812942844417209,19.28579702497655,0],[5.843307155582796,19.28579702497655,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.3';
	//rect.bindPopup('Насос 3');
	rect.bindTooltip('Насос 3');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[16.129178489988757,19.527165544565044,0],[15.679886555813583,19.341062731964847,0],[15.29407082529849,19.045015909553797,0],[14.99802400288744,18.659200179038706,0],[14.811921190287244,18.20990824486353,0],[14.748444986627161,17.727758609852284,0],[14.811921190287244,17.245608974841037,0],[14.99802400288744,16.796317040665862,0],[15.294070825298489,16.41050131015077,0],[15.679886555813583,16.11445448773972,0],[16.129178489988757,15.928351675139524,0],[16.611328125000004,15.864875471479442,0],[17.09347776001125,15.928351675139524,0],[17.542769694186426,16.11445448773972,0],[17.92858542470152,16.41050131015077,0],[18.224632247112567,16.796317040665862,0],[18.410735059712763,17.245608974841037,0],[18.474211263372844,17.727758609852284,0],[18.410735059712763,18.20990824486353,0],[18.224632247112567,18.659200179038702,0],[17.92858542470152,19.045015909553797,0],[17.542769694186426,19.341062731964847,0],[17.093477760011254,19.527165544565044,0],[16.129178489988757,19.527165544565044,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.4';
	//rect.bindPopup('Насос 4');
	rect.bindTooltip('Насос 4');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[-37.05700426284908,-21.195931570389508,0],[-37.47685836531572,-21.369840833849178,0],[-37.83739525665856,-21.646490520738574,0],[-38.11404494354796,-22.007027412081413,0],[-38.28795420700763,-22.426881514548064,0],[-38.34727141813144,-22.87744046489713,0],[-38.28795420700763,-23.327999415246197,0],[-38.11404494354796,-23.747853517712848,0],[-37.83739525665856,-24.108390409055687,0],[-37.47685836531572,-24.385040095945083,0],[-37.05700426284908,-24.558949359404753,0],[-36.60644531250001,-24.61826657052856,0],[-36.15588636215094,-24.558949359404753,0],[-35.73603225968429,-24.385040095945083,0],[-35.375495368341454,-24.108390409055684,0],[-35.098845681452055,-23.747853517712848,0],[-34.924936417992384,-23.327999415246197,0],[-34.86561920686857,-22.87744046489713,0],[-34.924936417992384,-22.426881514548064,0],[-35.098845681452055,-22.007027412081417,0],[-35.375495368341454,-21.646490520738578,0],[-35.736032259684286,-21.369840833849178,0],[-36.15588636215094,-21.195931570389508,0],[-37.05700426284908,-21.195931570389508,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.5';
	//rect.bindPopup('Насос 5');
	rect.bindTooltip('Насос 5');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[-22.23680287897993,-21.276089740126935,0],[-22.64675040002257,-21.445895563204026,0],[-22.998780317039174,-21.71601761910686,0],[-23.26890237294201,-22.068047536123466,0],[-23.4387081960191,-22.477995057166105,0],[-23.49662580004513,-22.91792293614603,0],[-23.4387081960191,-23.357850815125957,0],[-23.26890237294201,-23.767798336168596,0],[-22.998780317039174,-24.1198282531852,0],[-22.64675040002257,-24.389950309088036,0],[-22.23680287897993,-24.559756132165127,0],[-21.796875000000004,-24.617673736191158,0],[-21.356947121020077,-24.559756132165127,0],[-20.94699959997744,-24.389950309088036,0],[-20.594969682960834,-24.119828253185197,0],[-20.324847627058,-23.767798336168592,0],[-20.155041803980907,-23.357850815125957,0],[-20.097124199954877,-22.91792293614603,0],[-20.155041803980907,-22.477995057166105,0],[-20.324847627058,-22.06804753612347,0],[-20.594969682960834,-21.716017619106864,0],[-20.94699959997744,-21.44589556320403,0],[-21.356947121020074,-21.276089740126938,0],[-22.23680287897993,-21.276089740126935,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.6';
	//rect.bindPopup('Насос 6');
	rect.bindTooltip('Насос 6');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);

	bounds=FlipLL([[-7.872902585001529,-21.21240550639017,0],[-8.288643328546174,-21.38461096079744,0],[-8.645647998505433,-21.6585502788917,0],[-8.919587316599694,-22.015554948850955,0],[-9.091792771006961,-22.4312956923956,0],[-9.150528844592348,-22.87744046489713,0],[-9.091792771006961,-23.323585237398657,0],[-8.919587316599696,-23.739325980943303,0],[-8.645647998505433,-24.096330650902562,0],[-8.288643328546174,-24.370269968996823,0],[-7.872902585001529,-24.542475423404092,0],[-7.4267578125,-24.601211496989478,0],[-6.980613039998472,-24.542475423404092,0],[-6.564872296453826,-24.370269968996823,0],[-6.207867626494567,-24.096330650902562,0],[-5.933928308400307,-23.739325980943303,0],[-5.76172285399304,-23.323585237398657,0],[-5.702986780407653,-22.87744046489713,0],[-5.76172285399304,-22.431295692395604,0],[-5.933928308400306,-22.01555494885096,0],[-6.207867626494567,-21.6585502788917,0],[-6.564872296453825,-21.38461096079744,0],[-6.98061303999847,-21.21240550639017,0],[-7.872902585001529,-21.21240550639017,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.7';
	//rect.bindPopup('Насос 7');
	rect.bindTooltip('Насос 7');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[6.530052582178068,-21.170952375967843,0],[6.103961452188993,-21.347445100816195,0],[5.738068703892645,-21.628204481289774,0],[5.457309323419064,-21.99409722958612,0],[5.280816598570712,-22.420188359575196,0],[5.220618216877984,-22.87744046489713,0],[5.280816598570712,-23.33469257021906,0],[5.457309323419064,-23.760783700208137,0],[5.738068703892645,-24.126676448504487,0],[6.103961452188993,-24.407435828978066,0],[6.530052582178068,-24.583928553826418,0],[6.987304687500002,-24.644126935519147,0],[7.444556792821935,-24.583928553826418,0],[7.87064792281101,-24.407435828978066,0],[8.236540671107358,-24.126676448504487,0],[8.517300051580937,-23.760783700208137,0],[8.69379277642929,-23.33469257021906,0],[8.753991158122018,-22.87744046489713,0],[8.69379277642929,-22.4201883595752,0],[8.51730005158094,-21.994097229586124,0],[8.236540671107358,-21.628204481289774,0],[7.8706479228110116,-21.347445100816195,0],[7.4445567928219365,-21.170952375967843,0],[6.530052582178068,-21.170952375967843,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.8';
	//rect.bindPopup('Насос 8');
	rect.bindTooltip('Насос 8');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	
	
	bounds=FlipLL([[-27.999548931168782,18.65531543785848,0],[-28.210251241970216,18.568039683101173,0],[-28.39118541812522,18.4292040066897,0],[-28.530021094536693,18.248269830534696,0],[-28.617296849294,18.037567519733262,0],[-28.647064983940428,17.811456088564483,0],[-28.617296849294,17.585344657395705,0],[-28.530021094536693,17.37464234659427,0],[-28.39118541812522,17.193708170439265,0],[-28.210251241970216,17.054872494027794,0],[-27.999548931168782,16.967596739270487,0],[-27.773437500000004,16.93782860462406,0],[-27.547326068831225,16.967596739270487,0],[-27.33662375802979,17.054872494027794,0],[-27.155689581874785,17.193708170439265,0],[-27.016853905463314,17.37464234659427,0],[-26.929578150706007,17.585344657395705,0],[-26.89981001605958,17.811456088564483,0],[-26.929578150706007,18.037567519733262,0],[-27.01685390546331,18.248269830534696,0],[-27.155689581874785,18.4292040066897,0],[-27.336623758029788,18.568039683101173,0],[-27.54732606883122,18.65531543785848,0],[-27.999548931168782,18.65531543785848,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.51';
	//rect.bindPopup('Управление 1');
	rect.bindTooltip('Управление 1');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[-13.681186692976636,18.684461399214054,0],[-13.899166426743506,18.59417123716534,0],[-14.08634986767294,18.45054033123742,0],[-14.229980773600861,18.26335689030799,0],[-14.320270935649575,18.045377156541118,0],[-14.35106722848701,17.811456088564483,0],[-14.320270935649575,17.57753502058785,0],[-14.229980773600861,17.35955528682098,0],[-14.08634986767294,17.172371845891547,0],[-13.899166426743506,17.028740939963626,0],[-13.681186692976636,16.938450777914912,0],[-13.447265625000002,16.907654485077476,0],[-13.213344557023367,16.938450777914912,0],[-12.995364823256498,17.028740939963626,0],[-12.808181382327064,17.172371845891547,0],[-12.664550476399143,17.35955528682098,0],[-12.574260314350429,17.57753502058785,0],[-12.543464021512994,17.811456088564483,0],[-12.574260314350429,18.045377156541118,0],[-12.664550476399143,18.263356890307985,0],[-12.808181382327064,18.45054033123742,0],[-12.995364823256496,18.59417123716534,0],[-13.213344557023365,18.684461399214054,0],[-13.681186692976636,18.684461399214054,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.52';
	//rect.bindPopup('Управление 2');
	rect.bindTooltip('Управление 2');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
		*/
		
	bounds=FlipLL([[-39.864407149124354,1.9410210081332055,0],[-40.074758937362304,1.8538904445756126,0],[-40.25539211296821,1.7152857340088579,0],[-40.39399682353497,1.5346525584029518,0],[-40.48112738709256,1.3243007701649998,0],[-40.51084599972461,1.0985654960406521,0],[-40.48112738709256,0.8728302219163045,0],[-40.39399682353497,0.6624784336783524,0],[-40.25539211296821,0.48184525807244605,0],[-40.074758937362304,0.3432405475056912,0],[-39.864407149124354,0.25610998394809825,0],[-39.63867187500001,0.22639137131605247,0],[-39.41293660087566,0.25610998394809836,0],[-39.20258481263771,0.34324054750569155,0],[-39.0219516370318,0.4818452580724464,0],[-38.883346926465045,0.6624784336783525,0],[-38.79621636290745,0.8728302219163043,0],[-38.766497750275406,1.0985654960406517,0],[-38.79621636290745,1.3243007701649991,0],[-38.883346926465045,1.5346525584029511,0],[-39.0219516370318,1.7152857340088572,0],[-39.20258481263771,1.8538904445756117,0],[-39.41293660087566,1.941021008133205,0],[-39.864407149124354,1.9410210081332055,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.53';
	rect.bindPopup(
	'<h3>Задвижка 1.1M1</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Открыть: </td><td><img src="/images/start.png"  onclick="RCW(401,2,\'C349\',3,0,\'C349\',2,1);"></td></tr>'+
	'<tr><td>Закрыть: </td><td><img src="/images/stop.png" onclick="RCW(401,2,\'C349\',2,0,\'C349\',3,1);"></td></tr>'+
	'<tr><td>Автомат: </td><td><img src="/images/auto.png" onclick="RCW(401,2,\'C349\',2,0,\'C349\',3,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('1.1M1');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[8.966114049093715,1.913855370304561,0],[8.762545219022524,1.8295344000126492,0],[8.58773670164238,1.695399106898275,0],[8.453601408528005,1.5205905895181302,0],[8.369280438236093,1.317021759446938,0],[8.340520125545044,1.0985654960406521,0],[8.369280438236093,0.8801092326343662,0],[8.453601408528005,0.6765404025631738,0],[8.58773670164238,0.5017318851830289,0],[8.762545219022524,0.3675965920686546,0],[8.966114049093717,0.2832756217767428,0],[9.184570312500002,0.2545153090856953,0],[9.403026575906289,0.2832756217767429,0],[9.60659540597748,0.3675965920686549,0],[9.781403923357626,0.5017318851830294,0],[9.915539216471998,0.6765404025631739,0],[9.999860186763911,0.880109232634366,0],[10.02862049945496,1.0985654960406517,0],[9.999860186763911,1.3170217594469376,0],[9.915539216471998,1.5205905895181298,0],[9.781403923357626,1.6953991068982743,0],[9.606595405977481,1.8295344000126486,0],[9.403026575906289,1.9138553703045607,0],[8.966114049093715,1.913855370304561,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.54';
	rect.bindPopup(
	'<h3>Задвижка 1.1M2</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Открыть: </td><td><img src="/images/start.png"  onclick="RCW(401,2,\'C349\',5,0,\'C349\',4,1);"></td></tr>'+
	'<tr><td>Закрыть: </td><td><img src="/images/stop.png" onclick="RCW(401,2,\'C349\',4,0,\'C349\',5,1);"></td></tr>'+
	'<tr><td>Автомат: </td><td><img src="/images/auto.png" onclick="RCW(401,2,\'C349\',4,0,\'C349\',5,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('1.1M2');
	rect.on('contextmenu',function(event){ }); 
    rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	/*
	bounds=FlipLL([[-42.800757571334145,-22.14574015478144,0],[-43.00366804395224,-22.22978842448739,0],[-43.17791121697076,-22.363489913615588,0],[-43.31161270609896,-22.53773308663411,0],[-43.39566097580491,-22.7406435592522,0],[-43.42432827540448,-22.958393318086348,0],[-43.39566097580491,-23.176143076920493,0],[-43.31161270609896,-23.379053549538586,0],[-43.17791121697076,-23.553296722557107,0],[-43.00366804395224,-23.686998211685307,0],[-42.800757571334145,-23.771046481391256,0],[-42.5830078125,-23.799713780990825,0],[-42.365258053665855,-23.771046481391256,0],[-42.16234758104776,-23.686998211685307,0],[-41.98810440802924,-23.553296722557107,0],[-41.85440291890104,-23.379053549538586,0],[-41.77035464919509,-23.176143076920496,0],[-41.74168734959552,-22.958393318086348,0],[-41.77035464919509,-22.740643559252202,0],[-41.85440291890104,-22.53773308663411,0],[-41.98810440802924,-22.363489913615588,0],[-42.16234758104776,-22.22978842448739,0],[-42.365258053665855,-22.14574015478144,0],[-42.800757571334145,-22.14574015478144,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.55';
	//rect.bindPopup('Управление 5');
	rect.bindTooltip('Управление 5');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	*/
		
	bounds=FlipLL([[-40.26154402851532,-26.01474535426769,0],[-40.47341386542777,-26.1025047141746,0],[-40.65535061898325,-26.242109695283,0],[-40.79495560009165,-26.424046448838475,0],[-40.88271495999856,-26.63591628575093,0],[-40.91264804335554,-26.86328062676624,0],[-40.88271495999856,-27.09064496778155,0],[-40.79495560009165,-27.302514804694006,0],[-40.65535061898325,-27.484451558249482,0],[-40.47341386542777,-27.62405653935788,0],[-40.26154402851532,-27.711815899264792,0],[-40.03417968750001,-27.741748982621772,0],[-39.8068153464847,-27.711815899264792,0],[-39.59494550957224,-27.624056539357877,0],[-39.413008756016765,-27.484451558249482,0],[-39.27340377490837,-27.302514804694006,0],[-39.185644415001455,-27.09064496778155,0],[-39.155711331644476,-26.86328062676624,0],[-39.185644415001455,-26.63591628575093,0],[-39.27340377490837,-26.424046448838475,0],[-39.413008756016765,-26.242109695283,0],[-39.59494550957224,-26.102504714174604,0],[-39.8068153464847,-26.01474535426769,0],[-40.26154402851532,-26.01474535426769,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.56';
	rect.bindPopup(
	'<h3>Задвижка 1.2M1</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Открыть: </td><td><img src="/images/start.png"  onclick="RCW(401,2,\'C350\',0,0,\'C350\',1,1);"></td></tr>'+
	'<tr><td>Закрыть: </td><td><img src="/images/stop.png" onclick="RCW(401,2,\'C350\',1,0,\'C350\',0,1);"></td></tr>'+
	'<tr><td>Автомат: </td><td><img src="/images/auto.png" onclick="RCW(401,2,\'C350\',1,0,\'C350\',0,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('1.2M1');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	/*
	bounds=FlipLL([[-28.004388795069495,-22.05600096887286,0],[-28.21960114104506,-22.14514484136607,0],[-28.404408172203684,-22.28695226394235,0],[-28.546215594779966,-22.471759295100973,0],[-28.635359467273176,-22.68697164107654,0],[-28.66576478209012,-22.91792293614603,0],[-28.635359467273176,-23.148874231215522,0],[-28.546215594779966,-23.364086577191088,0],[-28.404408172203684,-23.54889360834971,0],[-28.21960114104506,-23.690701030925993,0],[-28.004388795069495,-23.779844903419203,0],[-27.773437500000004,-23.810250218236146,0],[-27.542486204930512,-23.779844903419203,0],[-27.327273858954946,-23.690701030925993,0],[-27.142466827796323,-23.54889360834971,0],[-27.00065940522004,-23.364086577191088,0],[-26.91151553272683,-23.148874231215522,0],[-26.88111021790989,-22.91792293614603,0],[-26.91151553272683,-22.68697164107654,0],[-27.00065940522004,-22.471759295100973,0],[-27.14246682779632,-22.28695226394235,0],[-27.327273858954946,-22.14514484136607,0],[-27.542486204930512,-22.05600096887286,0],[-28.004388795069495,-22.05600096887286,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.57';
	//rect.bindPopup('Управление 7');
	rect.bindTooltip('Управление 7');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[-13.665013093648907,-22.02430130472663,0],[-13.867921432154095,-22.10834869045407,0],[-14.042162772568322,-22.242048773375537,0],[-14.175862855489786,-22.41629011378976,0],[-14.259910241217225,-22.61919845229495,0],[-14.288577239308188,-22.836945920943855,0],[-14.259910241217225,-23.05469338959276,0],[-14.175862855489786,-23.257601728097946,0],[-14.042162772568322,-23.431843068512173,0],[-13.867921432154095,-23.56554315143364,0],[-13.665013093648907,-23.649590537161078,0],[-13.447265625000002,-23.67825753525204,0],[-13.229518156351096,-23.649590537161078,0],[-13.026609817845909,-23.565543151433637,0],[-12.852368477431682,-23.431843068512173,0],[-12.718668394510217,-23.257601728097946,0],[-12.634621008782778,-23.05469338959276,0],[-12.605954010691816,-22.836945920943855,0],[-12.634621008782778,-22.61919845229495,0],[-12.718668394510217,-22.416290113789763,0],[-12.852368477431682,-22.242048773375537,0],[-13.026609817845907,-22.108348690454072,0],[-13.229518156351096,-22.02430130472663,0],[-13.665013093648907,-22.02430130472663,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.58';
	//rect.bindPopup('Управление 8');
	rect.bindTooltip('Управление 8');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[0.740597706934655,-21.992759133094175,0],[0.5298136383611636,-22.080068753029497,0],[0.34880925521566586,-22.21895830115952,0],[0.20991970708564145,-22.399962684305017,0],[0.12261008715032085,-22.61074675287851,0],[0.09283040172232693,-22.836945920943855,0],[0.12261008715032062,-23.0631450890092,0],[0.20991970708564134,-23.273929157582693,0],[0.34880925521566575,-23.454933540728188,0],[0.5298136383611636,-23.593823088858212,0],[0.7405977069346552,-23.681132708793534,0],[0.9667968750000004,-23.710912394221527,0],[1.1929960430653455,-23.681132708793534,0],[1.403780111638837,-23.593823088858212,0],[1.5847844947843348,-23.454933540728188,0],[1.723674042914359,-23.273929157582693,0],[1.8109836628496794,-23.0631450890092,0],[1.8407633482776733,-22.836945920943855,0],[1.8109836628496796,-22.61074675287851,0],[1.723674042914359,-22.39996268430502,0],[1.5847844947843353,-22.21895830115952,0],[1.4037801116388378,-22.080068753029497,0],[1.1929960430653466,-21.992759133094175,0],[0.740597706934655,-21.992759133094175,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.59';
	//rect.bindPopup('Управление 9');
	rect.bindTooltip('Управление 9');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	*/
	bounds=FlipLL([[8.949566800221309,-25.947025732688957,0],[8.73057838894274,-26.037733702643077,0],[8.542528776997473,-26.18202924496765,0],[8.3982332346729,-26.37007885691292,0],[8.30752526471878,-26.589067268191485,0],[8.27658646538548,-26.82407078047018,0],[8.30752526471878,-27.059074292748875,0],[8.3982332346729,-27.27806270402744,0],[8.542528776997473,-27.46611231597271,0],[8.73057838894274,-27.610407858297283,0],[8.949566800221309,-27.701115828251403,0],[9.184570312500002,-27.732054627584702,0],[9.419573824778697,-27.701115828251403,0],[9.638562236057263,-27.610407858297283,0],[9.82661184800253,-27.46611231597271,0],[9.970907390327104,-27.27806270402744,0],[10.061615360281223,-27.059074292748875,0],[10.092554159614524,-26.82407078047018,0],[10.061615360281223,-26.589067268191485,0],[9.970907390327104,-26.37007885691292,0],[9.82661184800253,-26.18202924496765,0],[9.638562236057265,-26.037733702643077,0],[9.419573824778697,-25.947025732688957,0],[8.949566800221309,-25.947025732688957,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.60';
	rect.bindPopup(
	'<h3>Задвижка 1.2M2</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Открыть: </td><td><img src="/images/start.png"  onclick="RCW(401,2,\'C350\',2,0,\'C350\',3,1);"></td></tr>'+
	'<tr><td>Закрыть: </td><td><img src="/images/stop.png" onclick="RCW(401,2,\'C350\',3,0,\'C350\',2,1);"></td></tr>'+
	'<tr><td>Автомат: </td><td><img src="/images/auto.png" onclick="RCW(401,2,\'C350\',2,0,\'C350\',3,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('1.2M2');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	/*
	bounds=FlipLL([[-40.56152343750001,-4.017699464336852],[-40.56152343750001,-3.1405161039832357],[-38.78173828125001,-3.1405161039832357],[-38.78173828125001,-4.017699464336852],[-40.56152343750001,-4.017699464336852]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.71';
	//rect.bindPopup('Задвижка 1');
	rect.bindTooltip('Задвижка 1');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[8.217773437500002,-4.083452772038619],[8.217773437500002,-3.162455530237848],[10.107421875000002,-3.162455530237848],[10.107421875000002,-4.083452772038619],[8.217773437500002,-4.083452772038619]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.72';
	//rect.bindPopup('Задвижка 2');
	rect.bindTooltip('Задвижка 2');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[-40.91308593750001,-31.278550858946517],[-40.91308593750001,-30.533876572997617],[-39.15527343750001,-30.533876572997617],[-39.15527343750001,-31.278550858946517],[-40.91308593750001,-31.278550858946517]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.73';
	//rect.bindPopup('Задвижка 3');
	rect.bindTooltip('Задвижка 3');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[8.217773437500002,-31.316101383495635],[8.217773437500002,-30.524413269923986],[10.019531250000002,-30.524413269923986],[10.019531250000002,-31.316101383495635],[8.217773437500002,-31.316101383495635]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.74';
	//rect.bindPopup('Задвижка 4');
	rect.bindTooltip('Задвижка 4');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	*/
	
	/*
	bounds=FlipLL([[-44.31316954980717,-9.908319930127227,0],[-44.73785877373487,-10.084231966471785,0],[-45.102547678004555,-10.364067604934391,0],[-45.38238331646716,-10.728756509204079,0],[-45.55829535281172,-11.153445733131777,0],[-45.61829567246973,-11.60919340793894,0],[-45.55829535281172,-12.064941082746104,0],[-45.38238331646716,-12.489630306673803,0],[-45.102547678004555,-12.85431921094349,0],[-44.73785877373487,-13.134154849406096,0],[-44.31316954980717,-13.310066885750654,0],[-43.85742187500001,-13.370067205408665,0],[-43.40167420019284,-13.310066885750652,0],[-42.97698497626514,-13.134154849406096,0],[-42.61229607199546,-12.854319210943489,0],[-42.33246043353285,-12.489630306673803,0],[-42.156548397188295,-12.064941082746104,0],[-42.09654807753029,-11.60919340793894,0],[-42.156548397188295,-11.153445733131779,0],[-42.33246043353285,-10.72875650920408,0],[-42.61229607199546,-10.364067604934393,0],[-42.97698497626514,-10.084231966471787,0],[-43.40167420019284,-9.90831993012723,0],[-44.31316954980717,-9.908319930127227,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.101';
	//rect.bindPopup('Датчик 1');
	rect.bindTooltip('Датчик 1');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[15.149192668024908,-9.924570792063259,0],[14.728561103901892,-10.09880209068522,0],[14.367356591099416,-10.375964061538353,0],[14.090194620246281,-10.737168574340831,0],[13.915963321624321,-11.157800138463847,0],[13.856536270303783,-11.60919340793894,0],[13.91596332162432,-12.060586677414035,0],[14.090194620246281,-12.48121824153705,0],[14.367356591099414,-12.842422754339527,0],[14.728561103901892,-13.119584725192661,0],[15.149192668024908,-13.293816023814623,0],[15.600585937500002,-13.35324307513516,0],[16.051979206975098,-13.293816023814621,0],[16.47261077109811,-13.119584725192661,0],[16.83381528390059,-12.842422754339527,0],[17.110977254753724,-12.481218241537048,0],[17.285208553375682,-12.060586677414035,0],[17.34463560469622,-11.60919340793894,0],[17.285208553375682,-11.157800138463847,0],[17.110977254753724,-10.737168574340833,0],[16.83381528390059,-10.375964061538355,0],[16.47261077109811,-10.098802090685222,0],[16.051979206975098,-9.92457079206326,0],[15.149192668024908,-9.924570792063259,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.102';
	//rect.bindPopup('Датчик 2');
	rect.bindTooltip('Датчик 2');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[23.18421949204892,26.077731268912537,0],[22.75709724246,25.9008114403415,0],[22.39031905168983,25.61937263596145,0],[22.108880247309784,25.252594445191285,0],[21.931960418738743,24.825472195602362,0],[21.87161635991999,24.367113562651276,0],[21.931960418738743,23.908754929700194,0],[22.108880247309784,23.48163268011127,0],[22.39031905168983,23.114854489341102,0],[22.75709724246,22.833415684961054,0],[23.18421949204892,22.656495856390016,0],[23.642578125000004,22.596151797571263,0],[24.10093675795109,22.656495856390016,0],[24.528059007540012,22.833415684961057,0],[24.894837198310178,23.114854489341102,0],[25.176276002690226,23.48163268011127,0],[25.353195831261264,23.908754929700194,0],[25.413539890080017,24.367113562651276,0],[25.353195831261264,24.82547219560236,0],[25.176276002690226,25.25259444519128,0],[24.89483719831018,25.61937263596145,0],[24.528059007540012,25.900811440341496,0],[24.10093675795109,26.077731268912533,0],[23.18421949204892,26.077731268912537,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '4.103';
	//rect.bindPopup('Датчик 3');
	rect.bindTooltip('Датчик 3');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	*/
	
	function FlipLL(b) {
		var fb;
		var point;
		var j;
		fb=[];
		for (j = 0; j < b.length; j++) {
			 point =new  L.latLng(
			  b[j][1],               
			  b[j][0],               
               b[j][2]             
            );
			fb.push(point)
		}
		return fb;
	}


    function ReloadData() {

            function OnRequestReady(data) {

                $.each(data.data, function (i, v) {
                      var ok = false;
                    var rect;
                    var j;
                    for (j = 0; j < stanki.length; j++) {
                        if (stanki[j].tag == v.ID) {
                            ok = true;
                            rect = stanki[j];
                            break;
                        }
                    }

                    if (ok) {
						if(v.BLINK=='YES'){
							blink=true;
						}else{
							blink=false;
						}
					
						switch (v.COLOR) {
							case 'GREEN':
								 rgb = '#00FF00'; // green
								break;
							case 'YELLOW':
								rgb = '#dddd00';
								break;
							case 'RED':
								 rgb = '#FF0000'; //red
								break;
							default:
								rgb = '#000000'; //black
								break;
						}
                        rect.setStyle({ color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 1 });
                       // //rect.bindPopup(sPopup);
                       // rect.marker.bindPopup(sPopup);
                        rect.on('contextmenu',function(event){ }); 
						rect.blink = blink;
						}
						if(v.INFO !=null){
							var item=document.getElementById('v' +v.ID);
							if( item!=null){
								item.innerHTML =v.INFO;
							}else{
								console.log(v.ID);
							}
						}
                    
                });


            };
           $.ajax({
                dataType: "json",
                url: 'l24.aspx',
                success: OnRequestReady
            });
        }
        var blinkMode = false;
        function Blinker() {
            blinkMode = !blinkMode;


            var j;
            for (j = 0; j < stanki.length; j++) {

                rect = stanki[j];
                if (rect.blink == true) {
                    if (blinkMode) {
                        rect.setStyle({  fillOpacity: 0.1 });
                    } else {
                        rect.setStyle({  fillOpacity: 0.5 });
                    }
                }
               
            }
           

        }

        ReloadData();

		var intervalID = window.setInterval(ReloadData, 1000);   

		var intervalID2 = window.setInterval(Blinker, 500);  
   

</script>
 
</body>
</html>

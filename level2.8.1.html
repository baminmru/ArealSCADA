<html>
<head>
	<meta charset="UTF-8">
	<title>Каменогорск. Уровень 2. Блок водоподготовки</title>
	<link rel="stylesheet" href="/leaflet.css" />
<link rel="stylesheet" href="/css/areal.css" />
	<script src="/leaflet.js" type="text/javascript"></script>
	<script src="./dist/PruneCluster.js" type="text/javascript"></script>
	<script src="./layer/Marker.Text.js" type="text/javascript"></script>
	<script src="./jquery-2.1.1.min.js" type="text/jscript"></script>
	
	<script src="./draw/src/leaflet.circle.topolygon-src.js"></script>
	<script src="./draw/src/Leaflet.draw.js"></script>
    <script src="./draw/src/Leaflet.Draw.Event.js"></script>
    <link rel="stylesheet" href="./draw/src/leaflet.draw.css"/>

    <script src="./draw/src/Toolbar.js"></script>
    <script src="./draw/src/Tooltip.js"></script>

    <script src="./draw/src/ext/GeometryUtil.js"></script>
    <script src="./draw/src/ext/LatLngUtil.js"></script>
    <script src="./draw/src/ext/LineUtil.Intersect.js"></script>
    <script src="./draw/src/ext/Polygon.Intersect.js"></script>
    <script src="./draw/src/ext/Polyline.Intersect.js"></script>
    <script src="./draw/src/ext/TouchEvents.js"></script>

    <script src="./draw/src/draw/DrawToolbar.js"></script>
    <script src="./draw/src/draw/handler/Draw.Feature.js"></script>
    <script src="./draw/src/draw/handler/Draw.SimpleShape.js"></script>
    <script src="./draw/src/draw/handler/Draw.Polyline.js"></script>
    <script src="./draw/src/draw/handler/Draw.Circle.js"></script>
    <script src="./draw/src/draw/handler/Draw.Marker.js"></script>
    <script src="./draw/src/draw/handler/Draw.Polygon.js"></script>
    <script src="./draw/src/draw/handler/Draw.Rectangle.js"></script>


    <script src="./draw/src/edit/EditToolbar.js"></script>
    <script src="./draw/src/edit/handler/EditToolbar.Edit.js"></script>
    <script src="./draw/src/edit/handler/EditToolbar.Delete.js"></script>

    <script src="./draw/src/Control.Draw.js"></script>

    <script src="./draw/src/edit/handler/Edit.Poly.js"></script>
    <script src="./draw/src/edit/handler/Edit.SimpleShape.js"></script>
    <script src="./draw/src/edit/handler/Edit.Circle.js"></script>
    <script src="./draw/src/edit/handler/Edit.Rectangle.js"></script>
    <script src="./draw/src/edit/handler/Edit.Marker.js"></script>
	
	
	<script src="./dist/easy-button.js" type="text/javascript"></script>
	<link rel="stylesheet" href="./dist/easy-button.css"/>
	<script src="./dist/jQuery.print.js" type="text/javascript"></script>
	
	
</head>
<body oncontextmenu="return false">
	<div style="position:absolute; top:0px; left:0px; height:30px; width:1000px; background: #bfbfbf; padding:10px; overflow-y: scroll;" id="brief"><table border="0"><tr>	<td width="90px" ><span id="vP1">?</span></td>	<td width="90px" ><span id="vP2">?</span></td>	<td width="90px" ><span id="vP3">?</span></td>	<td width="90px" ><span id="vP4">?</span></td>	<td width="90px" ><span id="vP5">?</span></td>	<td width="90px" ><span id="vP6">?</span></td>	<td width="90px" ><span id="vP7">?</span></td>	<td width="90px" ><span id="vP8">?</span></td>	<td width="90px" ><span id="vP9">?</span></td>	<td width="90px" ><span id="vP0">?</span></td>	</tr></table>	</div>	<div style="position:absolute; width:1000px; bottom:0px; top:50px;" id="map"></div>
	<div style="position:absolute; width:990px; bottom:0px; top:0px; left:0px; background: #aeaeae; padding:10px; display:none; z-index:1200; "  id="detail">
		<h1><a href="#" onclick=' $("#detail").hide(); return false;' ><img src="images/close.png" alt="Закрыть" border="0" width="30px" height="30px" /></a> Детальная информация</h1>
		<hr>
		<div id="detail_info">
		</div>
	</div>
	<div style="position:absolute; top:0px; left:1008px; right:0px; bottom:0px; background: #bfbfbf; padding:10px; overflow-y: scroll;" id="brief">
<h1>
	<a href="level1.html"><img src="images\home.png" alt="Главный экран" width="50px"; height="50px"; /></a>
	<img src="/images/areal.logo.png" border="0"; width="250px"; height="50px";  align="right" />
	</h1>
	<a href="level2.8.html"><h2>Блок водоподготовки</h2></a>
	<h2>Подсистема 1  (ШУ12, ШУ13, ШУ14)</h2>
	<h3> Насосы</h3>
	<ul>
	<li><a href="#" onclick='GetDitail("81.1");'>Насос 1M1  : <span id="v81.1">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.2");'>Насос 1M2  : <span id="v81.2">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.3");'>Насос 1M3  : <span id="v81.3">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.4");'>Насос 1M4  : <span id="v81.4">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.5");'>Насос 1M5  : <span id="v81.5">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.6");'>Насос 1M6  : <span id="v81.6">?</span></a></li>
	</ul>
	
	<!-- 
	<h3> Датчики </h3>
	<ul>
	<li><a href="#" onclick='GetDitail("81.41");'>FE21a : <span id="v81.41">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.42");'>FE22a : <span id="v81.42">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.43");'>LT23a : <span id="v81.43">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.44");'>LT24a : <span id="v81.44">?</span></a></li>
	</ul>
	-->
	
	<h3> Управление </h3>
	<ul>
	<!-- 
	<li><a href="#" onclick='GetDitail("81.21");'>Задвижка 1M1 : <span id="v81.21">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.22");'>Задвижка 1M2 : <span id="v81.22">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.23");'>Задвижка 1M3 : <span id="v81.23">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.24");'>Задвижка 1M4 : <span id="v81.24">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.25");'>Задвижка 1M5 : <span id="v81.25">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.26");'>Задвижка 1M6 : <span id="v81.26">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.27");'>Задвижка 2M1 : <span id="v81.27">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.28");'>Задвижка 2M2 : <span id="v81.28">?</span></a></li>
	-->
	<li><a href="#" onclick='GetDitail("81.29");'>Задвижка 1M  : <span id="v81.29">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.30");'>Задвижка 2M  : <span id="v81.30">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.31");'>Задвижка 5M  : <span id="v81.31">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.32");'>Задвижка 6M  : <span id="v81.32">?</span></a></li>
	<li><a href="#" onclick='GetDitail("81.33");'>Задвижка 7M  : <span id="v81.33">?</span></a></li>
	</ul>
	
		<hr>

	<span id="v222"></span><br/>
	<span id="v223"></span><br/>
	<span id="v224"></span><br/>
	<span id="v225"></span><br/>
	<span id="v226"></span><br/>
	<span id="v227"></span><br/>
	<span id="v228"></span><br/>
	<span id="v229"></span><br/>
	<span id="v230"></span><br/>
	<span id="v231"></span><br/>
	
	</div>
<script type='text/javascript'>
function GetDitail(sid){
 return; 

	$("#detail").show(); 
	var item=document.getElementById('detail_info');
	if( item!=null){
		item.innerHTML =sid;
	}else{
		console.log(v.ID);
	}
	return false;
}
	var imgW=641;
	var imgH=745;

	var imageUrl = './images/l2_8.1.png', imageBounds = [[-imgH/20, -imgW/20], [imgH/20, imgW/20]];
	
	var map = L.map('map', { minZoom: 2, maxZoom: 7,attributionControl:false});  //.setView([27, 44], 3);
    map.attributionControl = false;
    L.imageOverlay(imageUrl, imageBounds, { opacity: 1 }).addTo(map); // , attribution: 'Цех:<%=GetC()%>'
	map.setView([0, 0], 4);
	//map.fitBounds(imageBounds);
	map.setMaxBounds([[-imgH/15, -imgW/15], [imgH/15, imgW/15]])
	
		L.easyButton({
	  id: 'id-map-print',  // an id for the generated button
	  position: 'topleft',      // inherited from L.Control -- the corner it goes in
	  type: 'replace',          // set to animate when you're comfy with css
	  leafletClasses: true,     // use leaflet classes to style the button?
	  states:[{                 // specify different icons and responses for your button
		stateName: 'map-print',
		onClick: function(button, map){
			$('#map').print();
		},
		title: 'Печать',
		icon: '<img src="/images/print.png" width="18px;" height="18px">'
	  }]
	}).addTo( map );
	
	/*var  drawnItems = L.featureGroup().addTo(map);
	
	
    map.addControl(new L.Control.Draw({
        edit: {
            featureGroup: drawnItems,
            poly: {
                allowIntersection: false
            }
        },
        draw: {
            polygon: {
                allowIntersection: false,
                showArea: true
            }
        }
    }));
	*/
	

	var rgb = '#00FF00'; // green
	var bounds;
    map.on(L.Draw.Event.CREATED, function (event) {
        var layer = event.layer;
        var s ="";
		if(typeof layer.toPolygon =='undefined'){
			s= JSON.stringify(layer.toGeoJSON()) ;
			drawnItems.addLayer(layer);
		}else{
			
			//alert ( JSON.stringify(layer.toPolygon(24,map)) );
			bounds=layer.toPolygon(24,map);
			var player= L.polygon( bounds, {  color: rgb, opacity: 1.0, fillOpacity: 1, weight: 1 } );
			s= JSON.stringify(player.toGeoJSON());
			drawnItems.addLayer(player);
		}
		
		$.ajax({
		  type: 'GET',
		  url: 'savelayer.aspx',
		  data: 'P=l2_81&L=' +s,
		  success: function(data){
			//$('.results').html(data);
		  }
		});
		
    });
	
	
	
	
	
	
	map.on('contextmenu',function(event){ }); 
    var stanki =[];
	var blink=true;
	  
	    function MapX(X) {
            var mx = parseInt(X);
            mx = mx / 10 -imgW/20;
            return mx;
        }

        function MapY(Y) {
            var my = parseInt(Y);
            my =  imgH/20 - my / 10;
            return my;
        }
	
	var rect;
	var bounds;
	var rgb = '#dddddd';
	var marker;
	function RCW(deviceID, QReg, Reg1, Bit1, Val1, Reg2, Bit2, Val2) {
	    $.ajax({
	        dataType: "json",
	        type: 'POST',
	        url: 'rcw.aspx',
	        data: 'id=' + deviceID + '&qreg=' + QReg + '&reg1=' + Reg1 + '&bit1=' + Bit1 + '&val1=' + Val1 + '&reg2=' + Reg2 + '&bit2=' + Bit2 + '&val2=' + Val2,
	        success: function (data) {
	            map.closePopup();
	        }
	    });
	}
	bounds=FlipLL([[9.525336989406354,26.308765141305027,0],[9.26957381135847,26.20282456420195,0],[9.049944991271678,26.03429744321138,0],[8.881417870281108,25.814668623124586,0],[8.77547729317803,25.558905445076704,0],[8.739342935216937,25.284437746983055,0],[8.77547729317803,25.009970048889407,0],[8.881417870281108,24.754206870841525,0],[9.049944991271678,24.53457805075473,0],[9.26957381135847,24.36605092976416,0],[9.525336989406354,24.260110352661084,0],[9.799804687500002,24.22397599469999,0],[10.07427238559365,24.260110352661084,0],[10.330035563641534,24.36605092976416,0],[10.549664383728325,24.53457805075473,0],[10.718191504718895,24.754206870841525,0],[10.824132081821974,25.009970048889407,0],[10.860266439783066,25.284437746983055,0],[10.824132081821974,25.558905445076704,0],[10.718191504718895,25.814668623124586,0],[10.549664383728325,26.03429744321138,0],[10.330035563641536,26.202824564201947,0],[10.074272385593652,26.308765141305027,0],[9.525336989406354,26.308765141305027,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.1';
	rect.bindPopup(
	'<h3>Насос 1М1</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Пуск: </td><td><img src="/images/start.png"  onclick="RCW(398,1,\'C351\',0,1,0,0,0);"></td></tr>'+
	'<tr><td>Стоп: </td><td><img src="/images/stop.png"  onclick="RCW(398,1,\'C351\',0,0,0,0,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Насос 1M1');
	rect.on('contextmenu',function(event){ }); 
    rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	 
	
	bounds=FlipLL([[9.491328899921726,19.174847725637083,0],[9.244825739562756,19.072742773448567,0],[9.03314867693582,18.910317250558805,0],[8.870723154046061,18.698640187931872,0],[8.768618201857546,18.4521370275729,0],[8.73379210412551,18.187606552494625,0],[8.768618201857546,17.92307607741635,0],[8.870723154046061,17.676572917057378,0],[9.03314867693582,17.464895854430445,0],[9.244825739562756,17.302470331540682,0],[9.491328899921726,17.200365379352167,0],[9.755859375000002,17.165539281620134,0],[10.020389850078278,17.200365379352167,0],[10.266893010437249,17.302470331540686,0],[10.478570073064184,17.464895854430445,0],[10.640995595953942,17.676572917057378,0],[10.743100548142458,17.92307607741635,0],[10.777926645874494,18.187606552494625,0],[10.743100548142458,18.4521370275729,0],[10.640995595953942,18.69864018793187,0],[10.478570073064184,18.910317250558805,0],[10.266893010437249,19.072742773448564,0],[10.02038985007828,19.17484772563708,0],[9.491328899921726,19.174847725637083,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.2';
	rect.bindPopup(
	'<h3>Насос 1М2</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Пуск: </td><td><img src="/images/start.png"  onclick="RCW(398,1,\'C351\',2,1,0,0,0);"></td></tr>'+
	'<tr><td>Стоп: </td><td><img src="/images/stop.png"  onclick="RCW(398,1,\'C351\',2,0,0,0,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Насос 1M2');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[9.496014430366666,13.95290225225811,0],[9.253877489296018,13.852605847315111,0],[9.045949784171807,13.693057307624773,0],[8.886401244481469,13.485129602500562,0],[8.78610483953847,13.242992661429914,0],[8.751895603592034,12.983147716796578,0],[8.78610483953847,12.723302772163242,0],[8.886401244481469,12.481165831092595,0],[9.045949784171807,12.273238125968383,0],[9.253877489296018,12.113689586278046,0],[9.496014430366666,12.013393181335047,0],[9.755859375000002,11.97918394538861,0],[10.015704319633338,12.013393181335047,0],[10.257841260703987,12.113689586278046,0],[10.465768965828197,12.273238125968383,0],[10.625317505518534,12.481165831092595,0],[10.725613910461533,12.723302772163242,0],[10.75982314640797,12.983147716796578,0],[10.725613910461533,13.242992661429913,0],[10.625317505518536,13.485129602500562,0],[10.465768965828198,13.693057307624773,0],[10.257841260703987,13.852605847315111,0],[10.01570431963334,13.95290225225811,0],[9.496014430366666,13.95290225225811,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.3';
	rect.bindPopup(
	'<h3>Насос 1М3</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Пуск: </td><td><img src="/images/start.png"  onclick="RCW(398,1,\'C351\',4,1,0,0,0);"></td></tr>'+
	'<tr><td>Стоп: </td><td><img src="/images/stop.png"  onclick="RCW(398,1,\'C351\',4,0,0,0,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Насос 1M3');
	rect.on('contextmenu',function(event){ }); 
    rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[9.97814225278191,-3.618480209803293,0],[9.714346030906647,-3.727748182606809,0],[9.487819079701143,-3.9015684257713845,0],[9.313998836536568,-4.128095376976888,0],[9.204730863733053,-4.391891598852151,0],[9.167461593063292,-4.674979814820243,0],[9.204730863733051,-4.9580680307883345,0],[9.313998836536568,-5.221864252663597,0],[9.487819079701143,-5.448391203869101,0],[9.714346030906647,-5.622211447033677,0],[9.978142252781911,-5.731479419837193,0],[10.261230468750002,-5.768748690506952,0],[10.544318684718094,-5.731479419837193,0],[10.808114906593357,-5.622211447033676,0],[11.03464185779886,-5.4483912038691,0],[11.208462100963436,-5.221864252663597,0],[11.317730073766953,-4.9580680307883345,0],[11.354999344436711,-4.674979814820243,0],[11.317730073766953,-4.391891598852151,0],[11.208462100963436,-4.128095376976889,0],[11.03464185779886,-3.9015684257713854,0],[10.808114906593358,-3.7277481826068097,0],[10.544318684718096,-3.6184802098032938,0],[9.97814225278191,-3.618480209803293,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.4';
	rect.bindPopup(
	'<h3>Насос 1М4</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Пуск: </td><td><img src="/images/start.png"  onclick="RCW(399,1,\'C351\',0,1,0,0,0);"></td></tr>'+
	'<tr><td>Стоп: </td><td><img src="/images/stop.png"  onclick="RCW(399,1,\'C351\',0,0,0,0,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Насос 1M4');
	rect.on('contextmenu',function(event){ }); 
    rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[9.998278390251738,-11.294248373650356,0],[9.753246061354274,-11.395744087499551,0],[9.542832030336903,-11.557200452148622,0],[9.381375665687832,-11.767614483165993,0],[9.279879951838637,-12.012646812063457,0],[9.245261653958545,-12.27559889056172,0],[9.279879951838637,-12.538550969059985,0],[9.381375665687832,-12.783583297957449,0],[9.542832030336903,-12.99399732897482,0],[9.753246061354274,-13.15545369362389,0],[9.998278390251738,-13.256949407473085,0],[10.261230468750002,-13.291567705353177,0],[10.524182547248268,-13.256949407473085,0],[10.769214876145732,-13.15545369362389,0],[10.979628907163102,-12.99399732897482,0],[11.141085271812171,-12.783583297957449,0],[11.242580985661366,-12.538550969059985,0],[11.277199283541458,-12.27559889056172,0],[11.242580985661366,-12.012646812063457,0],[11.141085271812171,-11.767614483165993,0],[10.979628907163102,-11.557200452148622,0],[10.769214876145732,-11.395744087499553,0],[10.524182547248268,-11.294248373650358,0],[9.998278390251738,-11.294248373650356,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.5';
	rect.bindPopup(
	'<h3>Насос 1М5</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Пуск: </td><td><img src="/images/start.png"  onclick="RCW(399,1,\'C351\',2,1,0,0,0);"></td></tr>'+
	'<tr><td>Стоп: </td><td><img src="/images/stop.png"  onclick="RCW(399,1,\'C351\',2,0,0,0,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Насос 1M5');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[9.99547611745257,-18.754215498250908,0],[9.747832486016229,-18.856792849027162,0],[9.535176078672912,-19.01996984954834,0],[9.371999078151738,-19.232626256891653,0],[9.26942172737548,-19.480269888327996,0],[9.234434503282456,-19.746024239625427,0],[9.26942172737548,-20.01177859092286,0],[9.371999078151738,-20.2594222223592,0],[9.535176078672912,-20.472078629702516,0],[9.747832486016229,-20.635255630223693,0],[9.99547611745257,-20.737832980999947,0],[10.261230468750002,-20.772820205092973,0],[10.526984820047433,-20.737832980999947,0],[10.774628451483775,-20.635255630223693,0],[10.987284858827092,-20.472078629702516,0],[11.150461859348265,-20.2594222223592,0],[11.253039210124523,-20.01177859092286,0],[11.288026434217548,-19.746024239625427,0],[11.253039210124523,-19.480269888327996,0],[11.150461859348265,-19.232626256891656,0],[10.987284858827092,-19.01996984954834,0],[10.774628451483776,-18.856792849027165,0],[10.526984820047435,-18.754215498250908,0],[9.99547611745257,-18.754215498250908,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.6';
	rect.bindPopup(
	'<h3>Насос 1М6</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Пуск: </td><td><img src="/images/start.png"  onclick="RCW(399,1,\'C351\',4,1,0,0,0);"></td></tr>'+
	'<tr><td>Стоп: </td><td><img src="/images/stop.png"  onclick="RCW(399,1,\'C351\',4,0,0,0,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Насос 1M6');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	/*
	bounds=FlipLL([[9.640827504621486,29.92337723704561,0],[9.472209097995831,29.85353320615552,0],[9.327413189629484,29.742427397917094,0],[9.216307381391056,29.597631489550746,0],[9.146463350500968,29.429013082925092,0],[9.122640852241663,29.248063243796576,0],[9.146463350500968,29.06711340466806,0],[9.216307381391056,28.898494998042406,0],[9.327413189629484,28.753699089676058,0],[9.472209097995831,28.64259328143763,0],[9.640827504621488,28.572749250547542,0],[9.821777343750002,28.548926752288235,0],[10.002727182878518,28.572749250547542,0],[10.171345589504172,28.64259328143763,0],[10.31614149787052,28.753699089676058,0],[10.427247306108947,28.898494998042406,0],[10.497091336999036,29.06711340466806,0],[10.520913835258341,29.248063243796576,0],[10.497091336999036,29.429013082925092,0],[10.427247306108947,29.597631489550746,0],[10.31614149787052,29.742427397917094,0],[10.171345589504172,29.85353320615552,0],[10.002727182878518,29.92337723704561,0],[9.640827504621486,29.92337723704561,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.21';
	//rect.bindPopup('Управление 1M1');
	rect.bindTooltip('Управление 1M1');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	 
	
	bounds=FlipLL([[9.648736279185048,23.138055264837412,0],[9.487487677206314,23.071263906984118,0],[9.349020363562738,22.965014200272456,0],[9.242770656851077,22.82654688662888,0],[9.175979298997785,22.66529828465015,0],[9.153198010662626,22.492257220085193,0],[9.175979298997785,22.319216155520238,0],[9.242770656851077,22.157967553541507,0],[9.349020363562738,22.01950023989793,0],[9.487487677206314,21.913250533186268,0],[9.648736279185048,21.846459175332974,0],[9.821777343750002,21.823677886997817,0],[9.994818408314957,21.846459175332974,0],[10.15606701029369,21.913250533186268,0],[10.294534323937265,22.01950023989793,0],[10.400784030648927,22.157967553541507,0],[10.467575388502219,22.319216155520238,0],[10.490356676837377,22.492257220085193,0],[10.467575388502219,22.66529828465015,0],[10.400784030648927,22.82654688662888,0],[10.294534323937265,22.965014200272456,0],[10.15606701029369,23.071263906984118,0],[9.994818408314957,23.138055264837412,0],[9.648736279185048,23.138055264837412,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.22';
	//rect.bindPopup('Управление 1M2');
	rect.bindTooltip('Управление 1M2');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[9.631998883706315,9.20728100120483,0],[9.475628768128963,9.142510378582843,0],[9.341350705730713,9.039475197411143,0],[9.238315524559013,8.905197135012893,0],[9.173544901937026,8.748827019435542,0],[9.151452848757927,8.581021215641854,0],[9.173544901937026,8.413215411848167,0],[9.238315524559013,8.256845296270818,0],[9.341350705730713,8.122567233872566,0],[9.475628768128963,8.019532052700866,0],[9.631998883706315,7.954761430078879,0],[9.799804687500002,7.93266937689978,0],[9.967610491293689,7.954761430078879,0],[10.12398060687104,8.019532052700866,0],[10.25825866926929,8.122567233872566,0],[10.36129385044099,8.256845296270818,0],[10.426064473062977,8.413215411848167,0],[10.448156526242077,8.581021215641854,0],[10.426064473062977,8.748827019435542,0],[10.36129385044099,8.905197135012891,0],[10.25825866926929,9.039475197411143,0],[10.12398060687104,9.142510378582843,0],[9.96761049129369,9.20728100120483,0],[9.631998883706315,9.20728100120483,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.23';
	//rect.bindPopup('Управление 1M3');
	rect.bindTooltip('Управление 1M3');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	 
	
	bounds=FlipLL([[10.1345681260702,0.504880616124591,0],[9.97558710064842,0.43902851923490827,0],[9.839066999138591,0.3342729609447892,0],[9.734311440848472,0.19775285943496013,0],[9.66845934395879,0.03877183401318099,0],[9.64599842004684,-0.13183582116662076,0],[9.668459343958789,-0.30244347634642255,0],[9.734311440848472,-0.4614245017682018,0],[9.839066999138591,-0.597944603278031,0],[9.97558710064842,-0.7027001615681502,0],[10.1345681260702,-0.7685522584578329,0],[10.305175781250002,-0.791013182369783,0],[10.475783436429804,-0.7685522584578328,0],[10.634764461851583,-0.70270016156815,0],[10.771284563361412,-0.5979446032780307,0],[10.876040121651531,-0.4614245017682017,0],[10.941892218541213,-0.30244347634642266,0],[10.964353142453163,-0.13183582116662107,0],[10.941892218541215,0.038771834013180545,0],[10.876040121651531,0.19775285943495963,0],[10.771284563361412,0.3342729609447887,0],[10.634764461851583,0.4390285192349077,0],[10.475783436429804,0.5048806161245907,0],[10.1345681260702,0.504880616124591,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.24';
	//rect.bindPopup('Управление 1M4');
	rect.bindTooltip('Управление 1M4');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[10.146650688717523,-7.2499914855989305,0],[9.99892881926603,-7.311179887384847,0],[9.872077174176713,-7.408516578131409,0],[9.77474048343015,-7.535368223220728,0],[9.713552081644234,-7.68309009267222,0],[9.69268185728206,-7.841615185204699,0],[9.713552081644234,-8.000140277737177,0],[9.77474048343015,-8.14786214718867,0],[9.872077174176713,-8.274713792277987,0],[9.99892881926603,-8.37205048302455,0],[10.146650688717523,-8.433238884810466,0],[10.305175781250002,-8.45410910917264,0],[10.46370087378248,-8.433238884810466,0],[10.611422743233973,-8.37205048302455,0],[10.73827438832329,-8.274713792277987,0],[10.835611079069853,-8.14786214718867,0],[10.896799480855769,-8.000140277737177,0],[10.917669705217943,-7.841615185204699,0],[10.896799480855769,-7.68309009267222,0],[10.835611079069855,-7.535368223220728,0],[10.738274388323292,-7.40851657813141,0],[10.611422743233973,-7.3111798873848475,0],[10.463700873782482,-7.249991485598931,0],[10.146650688717523,-7.2499914855989305,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.24';
	//rect.bindPopup('Управление 1M5');
	rect.bindTooltip('Управление 1M5');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	 
	
	bounds=FlipLL([[10.144783717055471,-14.773085822138752,0],[9.974846850937285,-14.843475976832085,0],[9.82891875573745,-14.955450542583282,0],[9.716944189986252,-15.101378637783117,0],[9.646554035292919,-15.271315503901304,0],[9.622545264374569,-15.453680224345835,0],[9.646554035292919,-15.636044944790365,0],[9.716944189986252,-15.805981810908552,0],[9.82891875573745,-15.951909906108387,0],[9.974846850937285,-16.063884471859584,0],[10.144783717055471,-16.13427462655292,0],[10.327148437500002,-16.15828339747127,0],[10.509513157944532,-16.13427462655292,0],[10.679450024062719,-16.063884471859584,0],[10.825378119262554,-15.951909906108387,0],[10.937352685013753,-15.805981810908552,0],[11.007742839707085,-15.636044944790365,0],[11.031751610625435,-15.453680224345835,0],[11.007742839707085,-15.271315503901304,0],[10.937352685013753,-15.10137863778312,0],[10.825378119262556,-14.955450542583282,0],[10.679450024062719,-14.843475976832085,0],[10.509513157944534,-14.773085822138752,0],[10.144783717055471,-14.773085822138752,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.26';
	//rect.bindPopup('Управление 1M6');
	rect.bindTooltip('Управление 1M6');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[19.500323904004347,21.207905288932775,0],[19.325903549627668,21.135658012596036,0],[19.176125395777476,21.020729192937118,0],[19.061196576118558,20.870951039086926,0],[18.98894929978182,20.696530684710247,0],[18.964307099255333,20.50935458871459,0],[18.98894929978182,20.322178492718933,0],[19.061196576118558,20.147758138342255,0],[19.176125395777476,19.997979984492062,0],[19.325903549627668,19.883051164833144,0],[19.500323904004347,19.810803888496405,0],[19.687500000000004,19.78616168796992,0],[19.87467609599566,19.810803888496405,0],[20.04909645037234,19.883051164833144,0],[20.19887460422253,19.997979984492062,0],[20.31380342388145,20.147758138342255,0],[20.38605070021819,20.322178492718933,0],[20.410692900744674,20.50935458871459,0],[20.38605070021819,20.696530684710247,0],[20.31380342388145,20.870951039086926,0],[20.19887460422253,21.020729192937118,0],[20.04909645037234,21.135658012596032,0],[19.874676095995664,21.207905288932775,0],[19.500323904004347,21.207905288932775,0]]);
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.27';
	//rect.bindPopup('Управление 2M1');
	rect.bindTooltip('Управление 2M1');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	 
	
	bounds=FlipLL([[19.55275646138437,-11.501349806280457,0],[19.386244960174974,-11.570321128372491,0],[19.243258292505978,-11.680038657396093,0],[19.133540763482376,-11.823025325065089,0],[19.06456944139034,-11.989536826274483,0],[19.041044607849948,-12.168225677390119,0],[19.06456944139034,-12.346914528505755,0],[19.133540763482376,-12.513426029715147,0],[19.243258292505978,-12.656412697384145,0],[19.386244960174974,-12.766130226407746,0],[19.55275646138437,-12.83510154849978,0],[19.731445312500004,-12.858626382040176,0],[19.910134163615638,-12.83510154849978,0],[20.076645664825033,-12.766130226407746,0],[20.21963233249403,-12.656412697384145,0],[20.32934986151763,-12.513426029715147,0],[20.398321183609667,-12.346914528505755,0],[20.42184601715006,-12.168225677390119,0],[20.398321183609667,-11.989536826274483,0],[20.32934986151763,-11.82302532506509,0],[20.21963233249403,-11.680038657396093,0],[20.076645664825033,-11.570321128372491,0],[19.91013416361564,-11.501349806280457,0],[19.55275646138437,-11.501349806280457,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.28';
	//rect.bindPopup('Управление 2M2');
	rect.bindTooltip('Управление 2M2');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	*/
	
	
	bounds=FlipLL([[-25.743897722548297,14.805147527146982,0],[-25.90019333076625,14.740407766483756,0],[-26.0344074122445,14.637421679598685,0],[-26.137393499129573,14.50320759812043,0],[-26.202133259792802,14.34691198990248,0],[-26.224214786532496,14.179186142354181,0],[-26.202133259792802,14.011460294805884,0],[-26.137393499129573,13.855164686587933,0],[-26.0344074122445,13.720950605109678,0],[-25.90019333076625,13.617964518224607,0],[-25.743897722548297,13.553224757561381,0],[-25.576171875,13.531143230821684,0],[-25.408446027451703,13.553224757561381,0],[-25.25215041923375,13.617964518224607,0],[-25.1179363377555,13.72095060510968,0],[-25.014950250870427,13.855164686587933,0],[-24.950210490207198,14.011460294805882,0],[-24.928128963467504,14.179186142354181,0],[-24.950210490207198,14.346911989902479,0],[-25.014950250870427,14.50320759812043,0],[-25.1179363377555,14.637421679598683,0],[-25.25215041923375,14.740407766483756,0],[-25.4084460274517,14.805147527146982,0],[-25.743897722548297,14.805147527146982,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.29';
	rect.bindPopup(
	'<h3>Задвижка 1M</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Открыть: </td><td><img src="/images/start.png"  onclick="RCW(397,2,\'C351\',1,0,\'C351\',0,1);"></td></tr>'+
	'<tr><td>Закрыть: </td><td><img src="/images/stop.png" onclick="RCW(397,2,\'C351\',0,0,\'C351\',1,1);"></td></tr>'+
	'<tr><td>Автомат: </td><td><img src="/images/auto.png" onclick="RCW(397,2,\'C351\',0,0,\'C351\',1,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Задвижка 1M');
	rect.on('contextmenu',function(event){ }); 
    rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[-25.685229916889185,2.2407017932954796,0],[-25.827806345526746,2.1816447028790833,0],[-25.950239500419716,2.087698438906297,0],[-26.044185764392502,1.9652652840133245,0],[-26.1032428548089,1.8226888553757665,0],[-26.123386128553484,1.669685500986584,0],[-26.1032428548089,1.5166821465974016,0],[-26.044185764392502,1.3741057179598435,0],[-25.950239500419716,1.2516725630668706,0],[-25.827806345526746,1.1577262990940844,0],[-25.685229916889185,1.0986692086776881,0],[-25.532226562500004,1.078525934933103,0],[-25.379223208110822,1.0986692086776881,0],[-25.23664677947326,1.1577262990940844,0],[-25.11421362458029,1.251672563066871,0],[-25.020267360607505,1.3741057179598435,0],[-24.961210270191106,1.5166821465974014,0],[-24.941066996446523,1.6696855009865839,0],[-24.961210270191106,1.822688855375766,0],[-25.020267360607505,1.965265284013324,0],[-25.11421362458029,2.0876984389062967,0],[-25.23664677947326,2.181644702879083,0],[-25.37922320811082,2.2407017932954796,0],[-25.685229916889185,2.2407017932954796,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.30';
	rect.bindPopup(
	'<h3>Задвижка 2M</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Открыть: </td><td><img src="/images/start.png"  onclick="RCW(397,2,\'C351\',4,0,\'C351\',3,1);"></td></tr>'+
	'<tr><td>Закрыть: </td><td><img src="/images/stop.png" onclick="RCW(397,2,\'C351\',3,0,\'C351\',4,1);"></td></tr>'+
	'<tr><td>Автомат: </td><td><img src="/images/auto.png" onclick="RCW(397,2,\'C351\',3,0,\'C351\',4,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Задвижка 2M');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[1.848675458742718,28.25060248193854,0],[1.6876431845481328,28.183900729987357,0],[1.5493616357841897,28.077793565681255,0],[1.4432544714780875,27.939512016917313,0],[1.3765527195269072,27.778479742722727,0],[1.353801994096265,27.605670826465445,0],[1.3765527195269072,27.432861910208164,0],[1.4432544714780875,27.271829636013578,0],[1.5493616357841895,27.133548087249636,0],[1.6876431845481328,27.027440922943534,0],[1.848675458742718,26.96073917099235,0],[2.0214843750000004,26.93798844556171,0],[2.1942932912572832,26.96073917099235,0],[2.3553255654518686,27.027440922943534,0],[2.493607114215812,27.133548087249636,0],[2.5997142785219136,27.271829636013578,0],[2.6664160304730937,27.432861910208164,0],[2.689166755903736,27.605670826465445,0],[2.6664160304730937,27.778479742722727,0],[2.5997142785219136,27.939512016917313,0],[2.493607114215812,28.077793565681255,0],[2.355325565451869,28.183900729987357,0],[2.194293291257284,28.25060248193854,0],[1.848675458742718,28.25060248193854,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.31';
	rect.bindPopup(
	'<h3>Задвижка 5M</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Открыть: </td><td><img src="/images/start.png"  onclick="RCW(397,2,\'C351\',7,0,\'C351\',6,1);"></td></tr>'+
	'<tr><td>Закрыть: </td><td><img src="/images/stop.png" onclick="RCW(397,2,\'C351\',6,0,\'C351\',7,1);"></td></tr>'+
	'<tr><td>Автомат: </td><td><img src="/images/auto.png" onclick="RCW(397,2,\'C351\',6,0,\'C351\',7,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Задвижка 5M');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[1.8770135555118819,2.8398590966014647,0],[1.7219129275844671,2.775614312981346,0],[1.5887249989451027,2.673415620863346,0],[1.4865263068271024,2.540227692223982,0],[1.4222815232069839,2.385127064296567,0],[1.4003688239189334,2.218683588558448,0],[1.4222815232069839,2.05224011282033,0],[1.4865263068271024,1.8971394848929148,0],[1.5887249989451027,1.7639515562535504,0],[1.7219129275844671,1.6617528641355501,0],[1.8770135555118819,1.5975080805154316,0],[2.0434570312500004,1.575595381227381,0],[2.2099005069881192,1.5975080805154316,0],[2.365001134915534,1.6617528641355501,0],[2.4981890635548987,1.7639515562535506,0],[2.6003877556728985,1.8971394848929148,0],[2.664632539293017,2.0522401128203294,0],[2.6865452385810675,2.218683588558448,0],[2.664632539293017,2.3851270642965665,0],[2.600387755672899,2.540227692223981,0],[2.4981890635548987,2.6734156208633455,0],[2.3650011349155347,2.7756143129813458,0],[2.20990050698812,2.8398590966014643,0],[1.8770135555118819,2.8398590966014647,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.32';
	rect.bindPopup(
	'<h3>Задвижка 6M</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Открыть: </td><td><img src="/images/start.png"  onclick="RCW(397,2,\'C351\',10,0,\'C351\',9,1);"></td></tr>'+
	'<tr><td>Закрыть: </td><td><img src="/images/stop.png" onclick="RCW(397,2,\'C351\',9,0,\'C351\',10,1);"></td></tr>'+
	'<tr><td>Автомат: </td><td><img src="/images/auto.png" onclick="RCW(397,2,\'C351\',9,0,\'C351\',10,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Задвижка 6M');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[25.951265420698892,7.134860042882877,0],[25.768440304139354,7.059131400061474,0],[25.611444817382136,6.938664526081766,0],[25.490977943402424,6.7816690393245445,0],[25.415249300581024,6.598843922765008,0],[25.389419670778707,6.402648405963896,0],[25.415249300581024,6.206452889162786,0],[25.490977943402424,6.023627772603248,0],[25.611444817382136,5.866632285846027,0],[25.768440304139354,5.746165411866318,0],[25.951265420698892,5.670436769044916,0],[26.147460937500004,5.6446071392426,0],[26.343656454301115,5.670436769044916,0],[26.526481570860653,5.746165411866318,0],[26.683477057617875,5.866632285846028,0],[26.803943931597583,6.023627772603248,0],[26.879672574418983,6.206452889162785,0],[26.9055022042213,6.402648405963896,0],[26.879672574418983,6.598843922765007,0],[26.803943931597583,6.7816690393245445,0],[26.683477057617875,6.938664526081765,0],[26.526481570860653,7.059131400061474,0],[26.343656454301115,7.134860042882877,0],[25.951265420698892,7.134860042882877,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.33';
	rect.bindPopup(
	'<h3>Задвижка 7M</h3><hr/>'+
	'<table class ="ctrl-popup" >'+
	'<tr><td>Открыть: </td><td><img src="/images/start.png"  onclick="RCW(397,2,\'C351\',13,0,\'C351\',12,1);"></td></tr>'+
	'<tr><td>Закрыть: </td><td><img src="/images/stop.png" onclick="RCW(397,2,\'C351\',12,0,\'C351\',13,1);"></td></tr>'+
	'<tr><td>Автомат: </td><td><img src="/images/auto.png" onclick="RCW(397,2,\'C351\',12,0,\'C351\',13,0);"></td></tr>'+
	'</table><br/>' 
	);
	rect.bindTooltip('Задвижка 7M');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	/*
	
	bounds=FlipLL([[-21.77280294304005,12.012351722740446,0],[-22.077975453590465,11.885945130007018,0],[-22.34003302937866,11.684861279700396,0],[-22.54111687968528,11.422803703912205,0],[-22.667523472418708,11.117631193361788,0],[-22.710638407180934,10.790140750321738,0],[-22.667523472418708,10.462650307281688,0],[-22.54111687968528,10.157477796731271,0],[-22.34003302937866,9.89542022094308,0],[-22.077975453590465,9.694336370636458,0],[-21.77280294304005,9.56792977790303,0],[-21.4453125,9.524814843140804,0],[-21.117822056959948,9.56792977790303,0],[-20.81264954640953,9.69433637063646,0],[-20.55059197062134,9.89542022094308,0],[-20.34950812031472,10.157477796731271,0],[-20.223101527581292,10.462650307281688,0],[-20.179986592819066,10.790140750321738,0],[-20.223101527581292,11.117631193361788,0],[-20.34950812031472,11.422803703912203,0],[-20.55059197062134,11.684861279700396,0],[-20.81264954640953,11.885945130007016,0],[-21.117822056959948,12.012351722740446,0],[-21.77280294304005,12.012351722740446,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.41';
	//rect.bindPopup('FE21a');
	rect.bindTooltip('FE21a');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	bounds=FlipLL([[-21.751519987954627,6.485270130232056,0],[-22.07781045371313,6.35011619404185,0],[-22.35800242875456,6.135117329777433,0],[-22.573001293018976,5.854925354736002,0],[-22.708155229209183,5.528634888977499,0],[-22.754253719926254,5.178482088522876,0],[-22.708155229209183,4.828329288068254,0],[-22.57300129301898,4.50203882230975,0],[-22.35800242875456,4.221846847268319,0],[-22.07781045371313,4.006847983003902,0],[-21.751519987954627,3.8716940468136958,0],[-21.401367187500004,3.8255955560966237,0],[-21.05121438704538,3.8716940468136958,0],[-20.724923921286877,4.006847983003902,0],[-20.444731946245447,4.22184684726832,0],[-20.229733081981028,4.502038822309751,0],[-20.094579145790824,4.828329288068253,0],[-20.048480655073753,5.178482088522876,0],[-20.094579145790824,5.528634888977498,0],[-20.229733081981028,5.854925354736001,0],[-20.444731946245444,6.135117329777432,0],[-20.724923921286877,6.350116194041849,0],[-21.051214387045377,6.485270130232055,0],[-21.751519987954627,6.485270130232056,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.42';
	//rect.bindPopup('FE22a');
	rect.bindTooltip('FE22a');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[-11.003676274533584,26.338179760020104,0],[-11.306495760878938,26.212747821825005,0],[-11.566532748974494,26.013214422986522,0],[-11.766066147812975,25.75317743489097,0],[-11.891498086008076,25.450357948545612,0],[-11.934280584257877,25.12539261151203,0],[-11.891498086008076,24.800427274478448,0],[-11.766066147812976,24.49760778813309,0],[-11.566532748974494,24.23757080003754,0],[-11.306495760878938,24.038037401199055,0],[-11.003676274533584,23.912605463003956,0],[-10.678710937500002,23.869822964754157,0],[-10.353745600466418,23.912605463003956,0],[-10.050926114121063,24.038037401199055,0],[-9.79088912602551,24.23757080003754,0],[-9.591355727187027,24.49760778813309,0],[-9.465923788991928,24.800427274478448,0],[-9.423141290742127,25.12539261151203,0],[-9.465923788991928,25.450357948545612,0],[-9.591355727187027,25.753177434890965,0],[-9.790889126025508,26.013214422986522,0],[-10.050926114121063,26.212747821825005,0],[-10.353745600466418,26.338179760020104,0],[-11.003676274533584,26.338179760020104,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.43';
	//rect.bindPopup('LT23a');
	rect.bindTooltip('LT23a');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	bounds=FlipLL([[-10.945712373410435,-6.69124079534849,0],[-11.276419126856684,-6.828224017794302,0],[-11.560403454110135,-7.046132856258924,0],[-11.778312292574759,-7.330117183512376,0],[-11.91529551502057,-7.660823936958624,0],[-11.962017941213366,-8.015715997869059,0],[-11.91529551502057,-8.370608058779492,0],[-11.778312292574759,-8.70131481222574,0],[-11.560403454110137,-8.985299139479192,0],[-11.276419126856684,-9.203207977943816,0],[-10.945712373410435,-9.340191200389627,0],[-10.590820312500002,-9.386913626582423,0],[-10.235928251589566,-9.340191200389627,0],[-9.905221498143318,-9.203207977943816,0],[-9.621237170889867,-8.985299139479192,0],[-9.403328332425245,-8.70131481222574,0],[-9.266345109979433,-8.370608058779492,0],[-9.219622683786637,-8.015715997869059,0],[-9.266345109979433,-7.660823936958625,0],[-9.403328332425245,-7.330117183512377,0],[-9.621237170889867,-7.046132856258925,0],[-9.905221498143318,-6.8282240177943025,0],[-10.235928251589566,-6.691240795348491,0],[-10.945712373410435,-6.69124079534849,0]]) ;
	rect = L.polygon(bounds, {  color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 2 });
	rect.tag = '81.44';
	//rect.bindPopup('LT24a');
	rect.bindTooltip('LT24a');
	rect.on('contextmenu',function(event){ }); 
 rect.blink = blink;
	rect.addTo(map);
	stanki.push(rect);
	
	
	*/
	

	function FlipLL(b) {
		var fb;
		var point;
		var j;
		fb=[];
		for (j = 0; j < b.length; j++) {
			 point =new  L.latLng(
			  b[j][1],               
			  b[j][0],               
               b[j][2]             
            );
			fb.push(point)
		}
		return fb;
	}


    function ReloadData() {

             function OnRequestReady(data) {

                $.each(data.data, function (i, v) {
                    var ok = false;
                    var rect;
                    var j;
                    for (j = 0; j < stanki.length; j++) {
                        if (stanki[j].tag == v.ID) {
                            ok = true;
                            rect = stanki[j];
                            break;
                        }
                    }

                    if (ok) {
						if(v.BLINK=='YES'){
							blink=true;
						}else{
							blink=false;
						}
					
						switch (v.COLOR) {
							case 'GREEN':
								 rgb = '#00FF00'; // green
								break;
							case 'YELLOW':
								rgb = '#dddd00';
								break;
							case 'RED':
								 rgb = '#FF0000'; //red
								break;
							default:
								rgb = '#000000'; //black
								break;
						}
                        rect.setStyle({ color: rgb, opacity: 1.0, fillOpacity: 0.5, weight: 1 });
                       // //rect.bindPopup(sPopup);
                       // rect.marker.bindPopup(sPopup);
                        rect.on('contextmenu',function(event){ }); 
						rect.blink = blink;
					}
					if(v.INFO !=null){
						var item=document.getElementById('v' +v.ID);
						if( item!=null){
							item.innerHTML =v.INFO;
						}else{
							console.log(v.ID);
						}
					}
               
				});
			 }
           $.ajax({
                dataType: "json",
                url: 'l281.aspx',
                success: OnRequestReady
            });
        }
        var blinkMode = false;
        function Blinker() {
            blinkMode = !blinkMode;


            var j;
            for (j = 0; j < stanki.length; j++) {

                rect = stanki[j];
                if (rect.blink == true) {
                    if (blinkMode) {
                        rect.setStyle({  fillOpacity: 0.1 });
                    } else {
                        rect.setStyle({  fillOpacity: 0.5 });
                    }
                }
               
            }
           

        }

        ReloadData();
		
		var intervalID = window.setInterval(ReloadData, 1000);   

		var intervalID2 = window.setInterval(Blinker, 600);
   

</script>
 
</body>
</html>
